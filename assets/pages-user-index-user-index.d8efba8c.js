import{b as e,u as o,P as t,c as n,_ as a,a as s,N as l}from"./index.feef7c0f.js";import{c as r,f as i,t as c,w as u,h as d,r as f,j as m,k as v,b as p,n as h,l as g,o as y,q as B,p as b,d as w,s as C,v as x,a as k,x as I,H as S,I as z,y as O,z as L,A,B as P,C as T,D as E,E as D,_ as j}from"./index.daaf9893.js";import{B as H}from"./index.1d067866.js";import{f as R,g as U,b as $,p as _,q as N,s as F,h as K,T as q,u as M,v as G,l as J,k as V,x as Y,y as Q,z as W,F as X,A as Z,B as ee,m as oe,C as te,D as ne,E as ae,G as se,H as le,I as re,J as ie,K as ce,o as ue,d as de,w as fe,L as me,a as ve,c as pe,e as he,t as ge,M as ye}from"./index-9c365a03.js";const[Be,be]=r("action-bar"),we=Symbol(Be);const Ce=u(R({name:Be,props:{placeholder:Boolean,safeAreaInsetBottom:c},setup(o,{slots:t}){const n=U(),a=e(n,be),{linkChildren:s}=i(we);s();const l=()=>{var e;return $("div",{ref:n,class:[be(),{"van-safe-area-bottom":o.safeAreaInsetBottom}]},[null==(e=t.default)?void 0:e.call(t)])};return()=>o.placeholder?a(l):l()}})),[xe,ke]=r("action-bar-button");const Ie=u(R({name:xe,props:d({},f,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:o}){const t=m(),{parent:n,index:a}=v(we),s=_((()=>{if(n){const e=n.children[a.value-1];return!(e&&"isButton"in e)}})),l=_((()=>{if(n){const e=n.children[a.value+1];return!(e&&"isButton"in e)}}));return p({isButton:!0}),()=>{const{type:n,icon:a,text:r,color:i,loading:c,disabled:u}=e;return $(H,{class:ke([n,{last:l.value,first:s.value}]),size:"large",type:n,icon:a,color:i,loading:c,disabled:u,onClick:t},{default:()=>[o.default?o.default():r]})}}})),Se={show:Boolean,zIndex:h,overlay:c,duration:h,teleport:[String,Object],lockScroll:c,lazyRender:c,beforeClose:Function,overlayStyle:Object,overlayClass:g,transitionAppear:Boolean,closeOnClickOverlay:c},ze=Object.keys(Se);let Oe=0;const Le="van-overflow-hidden";function Ae(e){const o=U(!1);return K(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[Pe,Te]=r("overlay");const Ee=u(R({name:Pe,props:{show:Boolean,zIndex:h,duration:h,className:g,lockScroll:c,lazyRender:c,customStyle:Object},setup(e,{slots:o}){const t=U(),n=Ae((()=>e.show||!e.lazyRender))((()=>{var n;const a=d(C(e.zIndex),e.customStyle);return x(e.duration)&&(a.animationDuration=`${e.duration}s`),M($("div",{ref:t,style:a,class:[Te(),e.className]},[null==(n=o.default)?void 0:n.call(o)]),[[G,e.show]])}));return w("touchmove",(o=>{e.lockScroll&&b(o,!0)}),{target:t}),()=>$(q,{name:"van-fade",appear:!0},{default:n})}})),De=d({},Se,{round:Boolean,position:k("center"),closeIcon:k("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:k("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[je,He]=r("popup");const Re=u(R({name:je,inheritAttrs:!1,props:De,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:a,attrs:s,slots:l}){let r,i;const c=U(),u=U(),d=Ae((()=>e.show||!e.lazyRender)),f=_((()=>{const o={zIndex:c.value};if(x(e.duration)){o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`}return o})),m=()=>{r||(r=!0,c.value=void 0!==e.zIndex?+e.zIndex:I(),a("open"))},v=()=>{r&&n(e.beforeClose,{done(){r=!1,a("close"),a("update:show",!1)}})},h=o=>{a("clickOverlay",o),e.closeOnClickOverlay&&v()},g=()=>{if(e.overlay)return $(Ee,{show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:h},{default:l["overlay-content"]})},C=e=>{a("clickCloseIcon",e),v()},k=()=>{if(e.closeable)return $(z,{role:"button",tabindex:0,name:e.closeIcon,class:[He("close-icon",e.closeIconPosition),S],classPrefix:e.iconPrefix,onClick:C},null)};let O;const L=()=>{O&&clearTimeout(O),O=setTimeout((()=>{a("opened")}))},A=()=>a("closed"),P=e=>a("keydown",e),T=d((()=>{var o;const{round:t,position:n,safeAreaInsetTop:a,safeAreaInsetBottom:r}=e;return M($("div",Z({ref:u,style:f.value,role:"dialog",tabindex:0,class:[He({round:t,[n]:n}),{"van-safe-area-top":a,"van-safe-area-bottom":r}],onKeydown:P},s),[null==(o=l.default)?void 0:o.call(l),k()]),[[G,e.show]])})),E=()=>{const{position:o,transition:t,transitionAppear:n}=e;return $(q,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:n,onAfterEnter:L,onAfterLeave:A},{default:T})};return K((()=>e.show),(e=>{e&&!r&&(m(),0===s.tabindex&&J((()=>{var e;null==(e=u.value)||e.focus()}))),!e&&r&&(r=!1,a("close"))})),p({popupRef:u}),function(e,t){const n=o(),a=o=>{n.move(o);const t=n.deltaY.value>0?"10":"01",a=B(o.target,e.value),{scrollHeight:s,offsetHeight:l,scrollTop:r}=a;let i="11";0===r?i=l>=s?"00":"01":r+l>=s&&(i="10"),"11"===i||!n.isVertical()||parseInt(i,2)&parseInt(t,2)||b(o,!0)},s=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),Oe||document.body.classList.add(Le),Oe++},l=()=>{Oe&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),Oe--,Oe||document.body.classList.remove(Le))},r=()=>t()&&l();y((()=>t()&&s())),N(r),F(r),K(t,(e=>{e?s():l()}))}(u,(()=>e.show&&e.lockScroll)),w("popstate",(()=>{e.closeOnPopstate&&(v(),i=!1)})),V((()=>{e.show&&m()})),Y((()=>{i&&(a("update:show",!0),i=!1)})),N((()=>{e.show&&e.teleport&&(v(),i=!0)})),Q(t,(()=>e.show)),()=>e.teleport?$(W,{to:e.teleport},{default:()=>[g(),E()]}):$(X,null,[g(),E()])}}));const[Ue,$e]=r("image");const _e=u(R({name:Ue,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:h,height:h,radius:h,lazyLoad:Boolean,iconSize:h,showError:c,errorIcon:k("photo-fail"),iconPrefix:String,showLoading:c,loadingIcon:k("photo")},emits:["load","error"],setup(e,{emit:o,slots:t}){const n=U(!1),a=U(!0),s=U(),{$Lazyload:l}=te().proxy,r=_((()=>{const o={width:O(e.width),height:O(e.height)};return x(e.radius)&&(o.overflow="hidden",o.borderRadius=O(e.radius)),o}));K((()=>e.src),(()=>{n.value=!1,a.value=!0}));const i=e=>{a.value&&(a.value=!1,o("load",e))},c=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:s.value,enumerable:!0}),i(e)},u=e=>{n.value=!0,a.value=!1,o("error",e)},d=(o,t,n)=>n?n():$(z,{name:o,size:e.iconSize,class:t,classPrefix:e.iconPrefix},null),f=()=>{if(n.value||!e.src)return;const o={alt:e.alt,class:$e("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?M($("img",Z({ref:s},o),null),[[ne("lazy"),e.src]]):$("img",Z({ref:s,src:e.src,onLoad:i,onError:u},o),null)},m=({el:e})=>{const o=()=>{e===s.value&&a.value&&c()};s.value?o():J(o)},v=({el:e})=>{e!==s.value||n.value||u()};return l&&L&&(l.$on("loaded",m),l.$on("error",v),F((()=>{l.$off("loaded",m),l.$off("error",v)}))),V((()=>{J((()=>{var o;(null==(o=s.value)?void 0:o.complete)&&!e.lazyLoad&&c()}))})),()=>{var o;return $("div",{class:$e({round:e.round,block:e.block}),style:r.value},[f(),a.value&&e.showLoading?$("div",{class:$e("loading")},[d(e.loadingIcon,$e("loading-icon"),t.loading)]):n.value&&e.showError?$("div",{class:$e("error")},[d(e.errorIcon,$e("error-icon"),t.error)]):void 0,null==(o=t.default)?void 0:o.call(t)])}}})),[Ne,Fe,Ke]=r("dialog"),qe=d({},Se,{title:String,theme:String,width:h,message:[String,Function],callback:Function,allowHtml:Boolean,className:g,transition:k("van-dialog-bounce"),messageAlign:String,closeOnPopstate:c,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:c,closeOnClickOverlay:Boolean}),Me=[...ze,"transition","closeOnPopstate"];var Ge=R({name:Ne,props:qe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:o,slots:t}){const a=U(),s=oe({confirm:!1,cancel:!1}),l=e=>o("update:show",e),r=o=>{var t;l(!1),null==(t=e.callback)||t.call(e,o)},i=t=>()=>{e.show&&(o(t),e.beforeClose?(s[t]=!0,n(e.beforeClose,{args:[t],done(){r(t),s[t]=!1},canceled(){s[t]=!1}})):r(t))},c=i("cancel"),u=i("confirm"),d=ae((t=>{var n,s;if(t.target!==(null==(s=null==(n=a.value)?void 0:n.popupRef)?void 0:s.value))return;({Enter:e.showConfirmButton?u:P,Escape:e.showCancelButton?c:P})[t.key](),o("keydown",t)}),["enter","esc"]),f=()=>{const o=t.title?t.title():e.title;if(o)return $("div",{class:Fe("header",{isolated:!e.message&&!t.default})},[o])},m=o=>{const{message:t,allowHtml:n,messageAlign:a}=e,s=Fe("message",{"has-title":o,[a]:a}),l=T(t)?t():t;return n&&"string"==typeof l?$("div",{class:s,innerHTML:l},null):$("div",{class:s},[l])},v=()=>{if(t.default)return $("div",{class:Fe("content")},[t.default()]);const{title:o,message:n,allowHtml:a}=e;if(n){const e=!(!o&&!t.title);return $("div",{key:a?1:0,class:Fe("content",{isolated:!e})},[m(e)])}},p=()=>t.footer?t.footer():"round-button"===e.theme?$(Ce,{class:Fe("footer")},{default:()=>[e.showCancelButton&&$(Ie,{type:"warning",text:e.cancelButtonText||Ke("cancel"),class:Fe("cancel"),color:e.cancelButtonColor,loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:c},null),e.showConfirmButton&&$(Ie,{type:"danger",text:e.confirmButtonText||Ke("confirm"),class:Fe("confirm"),color:e.confirmButtonColor,loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}):$("div",{class:[D,Fe("footer")]},[e.showCancelButton&&$(H,{size:"large",text:e.cancelButtonText||Ke("cancel"),class:Fe("cancel"),style:{color:e.cancelButtonColor},loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:c},null),e.showConfirmButton&&$(H,{size:"large",text:e.confirmButtonText||Ke("confirm"),class:[Fe("confirm"),{[E]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]);return()=>{const{width:o,title:t,theme:n,message:s,className:r}=e;return $(Re,Z({ref:a,role:"dialog",class:[Fe([n]),r],style:{width:O(o)},tabindex:0,"aria-labelledby":t||s,onKeydown:d,"onUpdate:show":l},A(e,Me)),{default:()=>[f(),v(),p()]})}}});let Je;let Ve=d({},{title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1});function Ye(){const e={setup(){const{state:e,toggle:o}=function(){const e=oe({show:!1}),o=o=>{e.show=o},t=t=>{d(e,t,{transitionAppear:!0}),o(!0)},n=()=>o(!1);return p({open:t,close:n,toggle:o}),{open:t,close:n,state:e,toggle:o}}();return()=>$(Ge,Z(e,{"onUpdate:show":o}),null)}};({instance:Je}=function(e){const o=ee(e),t=document.createElement("div");return document.body.appendChild(t),{instance:o.mount(t),unmount(){o.unmount(),document.body.removeChild(t)}}}(e))}const Qe=e=>function(e){return L?new Promise(((o,t)=>{Je||Ye(),Je.open(d({},Ve,e,{callback:e=>{("confirm"===e?o:t)(e)}}))})):Promise.resolve()}(d({showCancelButton:!0},e));u(Ge);const We=j({components:{Tabbar:a,Footer:s},data:()=>({title:"Hello"}),computed:{...se(re,{hasUserInfo:"hasUserInfo",userInfo:"userInfo",isAdmin:"isAdmin",userRoles:"userRoles"})},onLoad(){},methods:{...le(re,{removeUserInfo:"removeUserInfo"}),handleLogout(){Qe({title:"确认退出？",showConfirmButton:!0}).then((()=>{this.confirmLogout()})).catch((()=>{}))},confirmLogout(){ie(),this.removeUserInfo(),ce({url:"/pages/login/login"})}}},[["render",function(e,o,t,n,r,i){const c=l,u=_e,d=H,f=a,m=s,v=me;return ue(),de(v,{class:"page"},{default:fe((()=>[ve(" NavBar 导航栏 "),$(c,{title:"个人中心",fixed:"",placeholder:"","safe-area-inset-top":""}),e.hasUserInfo?(ue(),pe("div",{key:0,class:"userinfo"},[$(u,{round:"",width:"60",height:"60",src:"static/user-avatar.gif"}),he("div",{class:"userinfo__name"},ge(e.userInfo.username),1)])):ve("v-if",!0),$(d,{style:{"margin-top":"300px"},type:"danger",block:"",onClick:i.handleLogout},{default:fe((()=>[ye("退出登录")])),_:1},8,["onClick"]),ve(" 底部导航栏 "),$(f,{active:"user-index"}),ve(" 公共的底部 "),$(m)])),_:1})}],["__scopeId","data-v-096c28f5"]]);export{We as default};
